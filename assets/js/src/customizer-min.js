window.onload=function(){"use strict";function e(e,t){throw $('<div id="bsCustomizerAlert" class="bs-customizer-alert"><div class="container"><a href="#bsCustomizerAlert" data-dismiss="alert" class="close pull-right" aria-label="Close" role="button"><span aria-hidden="true">&times;</span></a><p class="bs-customizer-alert-text"><span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span><span class="sr-only">Warning:</span>'+e+"</p>"+(t.message?$("<p></p>").text("Error: "+t.message)[0].outerHTML:"")+(t.extract?$('<pre class="bs-customizer-alert-extract"></pre>').text(t.extract.join("\n"))[0].outerHTML:"")+"</div></div>").appendTo("body").alert(),t}function t(e){$('<div class="bs-callout bs-callout-info"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+e+"</div>").insertAfter(".bs-customize-download")}function n(e,t){var n=$('<div class="bs-callout bs-callout-danger"><h4>Attention!</h4><p>'+e+"</p></div>");t?n.appendTo(".bs-docs-container"):n.insertAfter(".bs-customize-download")}function r(e,t,n){$('<div class="alert alert-'+e+'">'+t+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>').insertAfter(n)}function o(e){e=e.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var t=location.search.match(new RegExp("[?&]"+e+"=([^&]+)(&|$)"));return t&&decodeURIComponent(t[1].replace(/\+/g," "))}function s(n,r){var o={description:"Bootstrap Customizer Config",public:!0,files:{"config.json":{content:n}}};$.ajax({url:"https://api.github.com/gists",type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify(o)}).success(function(e){var n=e.html_url,o=window.location.protocol+"//"+window.location.host,s=o+window.location.pathname+"?id="+e.id;t('<strong>Success!</strong> Your configuration has been saved to <a href="'+n+'">'+n+'</a> and can be revisited here at <a href="'+s+'">'+s+"</a> for further customization."),history.replaceState(!1,document.title,s),r(n,s)}).error(function(t){try{e("<strong>Ruh roh!</strong> Could not save gist file, configuration not saved.",t)}catch(e){}r("<none>","<none>")})}function i(){var e={};$("#less-variables-section input").each(function(){$(this).val()&&(e[$(this).prev().text()]=$(this).val())});var t={vars:e,css:$("#less-section input:checked").map(function(){return this.value}).toArray(),js:$("#plugin-section input:checked").map(function(){return this.value}).toArray()};return!$.isEmptyObject(t.vars)||t.css.length||t.js.length?t:null}function a(e){if(e.js&&$("#plugin-section input").each(function(){$(this).prop("checked",~$.inArray(this.value,e.js))}),e.css&&$("#less-section input").each(function(){$(this).prop("checked",~$.inArray(this.value,e.css))}),e.vars)for(var t in e.vars)$('input[data-var="'+t+'"]').val(e.vars[t])}function c(){var t=o("id");t&&$.ajax({url:"https://api.github.com/gists/"+t,type:"GET",dataType:"json"}).success(function(e){a(JSON.parse(e.files["config.json"].content))}).error(function(t){e("Error fetching bootstrap config file",t)})}function l(t,n,r,o,s){if(!t&&!n)return e("<strong>Ruh roh!</strong> No Bootstrap files selected.",new Error("no Bootstrap"));var i=new JSZip;if(t){var a=i.folder("css");for(var c in t)a.file(c,t[c])}if(n){var l=i.folder("js");for(var u in n)l.file(u,n[u])}if(r){var p=i.folder("fonts");for(var f in r)p.file(f,r[f],{base64:!0})}o&&i.file("config.json",o),s(i.generate({type:"blob"}))}function u(e){var t="";for(var n in e)t+=n+": "+e[n]+";\n";return t+"\n\n"}function p(){if($('#less-section [value="glyphicons.less"]:checked').length)return __fonts}function f(e){var t=/^@import \"(.*?)\";$/,n=__less[e].split("\n"),r=[];return $.each(n,function(e,n){var o=t.exec(n);if(o){var s=o[1],i=f(s);$.each(i,function(e,t){-1===$.inArray(t,r)&&r.push(t)}),r.push(s)}}),r}function d(e,t,n){var r=__less[e],o=f(e);return $.each(o,function(e,o){var s=t[o];(s||null==s)&&(r+=__less[o]),"variables.less"===o&&n&&(r+=u(n))}),r=r.replace(/@import[^\n]*/gi,"")}function h(e,t,n){var r=$.Deferred();return new less.Parser({paths:["variables.less","mixins.less"],optimization:0,filename:t+".css"}).parse(e,function(e,o){if(e)return r.reject(e);try{n[t+".css"]=j+o.toCSS(),n[t+".min.css"]=j+o.toCSS({compress:!0})}catch(e){return r.reject(e)}r.resolve()}),r.promise()}function v(t){var n=$.Deferred(),r=!1,o={};if($("#less-section input").each(function(){var e=$(this),t=e.is(":checked");o[e.val()]=t,r=r||t}),!r)return!1;var s={},i={};$("#less-variables-section input").each(function(){$(this).val()&&(i[$(this).prev().text()]=$(this).val())});var a=t+d("bootstrap.less",o,i),c=t+d("theme.less",o,i),l=autoprefixer({browsers:__configBridge.autoprefixerBrowsers});return $.when(h(a,"bootstrap",s),h(c,"bootstrap-theme",s)).done(function(){for(var e in s)s[e]=l.process(s[e]).css;n.resolve(s)}).fail(function(t){e("<strong>Ruh roh!</strong> Problem parsing or compiling Less files.",t),n.reject()}),n.promise()}function g(e){var t=UglifyJS.parse(e);t.figure_out_scope();var n=UglifyJS.Compressor(),r=t.transform(n);r.figure_out_scope(),r.compute_char_frequency(),r.mangle_names();var o=UglifyJS.OutputStream();return r.print(o),o.toString()}function b(e){var t=$("#plugin-section input:checked"),n=__configBridge.jqueryCheck.join("\n"),r=__configBridge.jqueryVersionCheck.join("\n");if(!t.length)return!1;var o=t.map(function(){return __js[this.value]}).toArray().join("\n");return e=j+e,o=n+r+o,{"bootstrap.js":e+o,"bootstrap.min.js":e+g(o)}}function m(){_.nextAll(".alert").remove()}function w(e){e.stopPropagation(),e.preventDefault();var t=e.originalEvent.hasOwnProperty("dataTransfer")?e.originalEvent.dataTransfer.files[0]:e.originalEvent.target.files[0],n=new FileReader;n.onload=function(e){var t=e.target.result;try{var n=JSON.parse(t);if(!$.isPlainObject(n))throw new Error("JSON data from config file is not an object.");a(n),r("success","<strong>Woohoo!</strong> Your configuration was successfully uploaded. Tweak your settings, then hit Download.",_)}catch(e){return r("danger","<strong>Shucks.</strong> We can only read valid <code>.json</code> files. Please try again.",_)}},n.readAsText(t,"utf-8")}function y(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy",m()}var j="/*!\n * Bootstrap v3.3.7 (http://getbootstrap.com)\n * Copyright 2011-"+(new Date).getFullYear()+" Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\n\n",k=window.File&&window.FileReader&&window.FileList&&window.Blob,_=$("#import-drop-target");k&&_.on("dragover",y).on("drop",w),$("#import-file-select").on("change",w),$("#import-manual-trigger").on("click",m);var S=$("#less-section input"),x=$("#plugin-section input"),C=$("#less-variables-section input");$("#less-section .toggle").on("click",function(e){e.preventDefault(),S.prop("checked",!S.is(":checked"))}),$("#plugin-section .toggle").on("click",function(e){e.preventDefault(),x.prop("checked",!x.is(":checked"))}),$("#less-variables-section .toggle").on("click",function(e){e.preventDefault(),C.val("")}),$("[data-dependencies]").on("click",function(){if($(this).is(":checked")){var e=this.getAttribute("data-dependencies");if(e){e=e.split(",");for(var t=0;t<e.length;t++){var n=$('[value="'+e[t]+'"]');n&&n.prop("checked",!0)}}}}),$("[data-dependents]").on("click",function(){if(!$(this).is(":checked")){var e=this.getAttribute("data-dependents");if(e){e=e.split(",");for(var t=0;t<e.length;t++){var n=$('[value="'+e[t]+'"]');n&&n.prop("checked",!1)}}}});var A=$("#btn-compile");A.on("click",function(e){var t=i(),n=JSON.stringify(t,null,2);e.preventDefault(),A.attr("disabled","disabled"),s(n,function(e,r){t.customizerUrl=r,n=JSON.stringify(t,null,2);var o="/*!\n * Generated using the Bootstrap Customizer ("+r+")\n * Config saved to config.json and "+e+"\n */\n";$.when(v(o),b(o),p()).done(function(e,t,r){l(e,t,r,n,function(e){A.removeAttr("disabled"),setTimeout(function(){saveAs(e,"bootstrap.zip")},0)})})})}),function(){function e(){$(".bs-docs-section, .bs-docs-sidebar").css("display","none"),n('Looks like your current browser doesn\'t support the Bootstrap Customizer. Please take a second to <a href="http://browsehappy.com/">upgrade to a more modern browser</a> (other than Safari).',!0)}var t=window.webkitURL||window.URL,r=new Blob(["<svg xmlns='http://www.w3.org/2000/svg'></svg>"],{type:"image/svg+xml;charset=utf-8"}),o=t.createObjectURL(r);null!==/^blob:/.exec(o)&&k?$("<img>").on("load",function(){A.prop("disabled",!1)}).on("error",e).attr("src",o):e()}(),c()};